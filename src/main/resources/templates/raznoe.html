<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css">
    <link   rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&display=swap"
    />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link th:href="@{/css/style.css}" rel="stylesheet"/>
    <title>Project contracts</title>
</head>
<body>
<header class="container-fluid fixed-top">
    <div class="row bg-dark text-bg-secondary align-items-center " style="height: 8vh">
        <div class="col-xl-1 text-center">
            <a class="text-white" th:href="@{/}">
                <img width="75px" th:src="@{/logo/logo.png}" alt="logo"/>
            </a>
        </div>
        <div class="col-xl-8" style="line-height: 28px">
            <h4 class="title text-center mb-0" id="task">Project Deadline Management</h4>
        </div>
        <div class="col-xl-2">
            <p class="align-items-center text-end mb-0">Welcome: <span class="user" th:text="${#authentication.name}"></span></p>
        </div>
    </div>
</header>
<main style="max-height: 84vh;">
    <div class="container-fluid" >
        <div class="row" style="position: relative; top: 8vh; max-height: 84vh;">
            <div class="aside_menu col-xl-2" style="position: fixed; ">
                <div class="title_menu">
                    <h3 class="title_h"><span class="title_s">М</span>ЕНЮ</h3>
                </div>
                <ul class="list_menu">
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/divisions}">Дивізіони</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/equipments}">Обладнання</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/projects}">Проекти</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/designs}" >Конструктор</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/technologies}">Технолог</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/contracts}">Контракти</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/tasks}">Завдання</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/production_plans}">План виробництва</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu" th:href="@{/equipment_plans}">Показники</a>
                    </li>
                    <li class="item_menu">
                        <a class="link_menu_active" th:href="@{/raznoe}">Показники</a>
                    </li>
                </ul>
            </div>
            <div class="free col-xl-2"></div>
            <div class="free col-xl-10" >
                <div class="row">
                    <div class="col-xl-10">
                        <h2 class="text_h m-0" th:text="'Фактичне завантаження обладнання на протягом звітного періоду (' + ${year} + 'р.)'"></h2>
                    </div>
                    <div class="col-xl-2">
                        <form method="post" class="px-2">

                            <label for="year">Choose a flavor:</label>
                            <input list="year-list" type="number" id="year" name="year" th:value="${currentYear}"/>

                            <datalist id="year-list">
                                <option th:each="year: ${years}"
                                        th:value="${year}"></option>
                            </datalist>

                            <input id="csrfToken" th:name="${_csrf.parameterName}" type="hidden" th:value="${_csrf.token}">
                            <input class="btn btn-primary border-3 rounded-0 w-100 text-center" type="submit"  value="Створити">
                        </form>
                    </div>
<!--                    <div class="col-xl-12">-->
<!--                        <table class="table_sm table table-striped  table-bordered border-secondary-subtle">-->
<!--                            <thead>-->
<!--                            <tr>-->
<!--                                <th class="text_n1 text-center p-0" rowspan="2">Обладнання</th>-->
<!--                                <th class="text_n1 text-center p-0" colspan="12">Місяці</th>-->
<!--                                <th class="text_n1 text-center p-0" colspan="5">Рік</th>-->
<!--                            </tr>-->

<!--                            <tr>-->
<!--                                <th class="text_n1 text-center p-0"-->
<!--                                    th:each="chartMonth: ${chartYearCommands[0].chartMonthCommands}"-->
<!--                                    th:text="${chartMonth.monthNumber}">-->
<!--                                </th>-->
<!--                                <th class="text_n1 text-center m-0 p-0 px-1"  style="background-color: yellow" >П(г)</th>-->
<!--                                <th class="text_n1 text-center m-0 p-0 px-1"  style="background-color: yellow" >Ф(г)</th>-->
<!--                                <th class="text_n1 text-center m-0 p-0 px-1"  style="background-color: limegreen" >Ф(%)</th>-->
<!--                                <th class="text_n1 text-center m-0 p-0 px-1" style="background-color: yellow" >ПВЗ(%)</th>-->
<!--                                <th class="text_n1 text-center m-0 p-0 px-1" style="background-color: limegreen">ФВЗ(%)</th>-->
<!--                            </tr>-->
<!--                            </thead>-->
<!--                            <tbody>-->
<!--                            <tr th:each="chartE: ${chartYearCommands}">-->
<!--                                <td class="text_n ty p-0 px-1" th:text="${chartE.equipment}"></td>-->
<!--                                <th class="text_b tx text-center p-0"-->
<!--                                    th:each="chartMonth: ${chartE.chartMonthCommands}" >-->
<!--                                    <a class="text_b tx p-0" th:text="${chartMonth.factPercentsPerMonth}"-->
<!--                                       th:href="@{/equipment_plans/{id}(id=${chartE.equipmentId + ':' + chartMonth.monthNumber})}"/>-->
<!--                                </th>-->
<!--                                <th class="text_n tx text-center p-0" style="background-color: yellow" th:text="${chartE.planHoursPerYear}"></th>-->
<!--                                <th class="text_n tx text-center p-0" style="background-color: yellow" th:text="${chartE.factHoursPerYear}"></th>-->
<!--                                <th class="text_n tx text-center p-0" style="background-color: limegreen" th:text="${chartE.factPercentsPerYear}"></th>-->
<!--                                <th class="text_n tx text-center p-0" style="background-color: yellow"  th:text="${chartE.planForPlanDoneOnTheCurrentDatePerYear}"></th>-->
<!--                                <th class="text_n tx text-center p-0" style="background-color: limegreen"  th:text="${chartE.factForPlanDonePerYear}"></th>-->
<!--                            </tr>-->
<!--                            </tbody>-->
<!--                        </table>-->
<!--                        <ol class="text_h1">-->
<!--                            Примітка-->
<!--                            <li class="text_p m-0">-->
<!--                                <p class="m-0">П(г) - Планове завантаження обладнання на місяць (годин(и))</p>-->
<!--                            </li>-->
<!--                            <li class="text_p m-0">-->
<!--                                <p class="m-0">Ф(г) - Фактичне завантаження обладнання на місяць (годин(и))</p>-->
<!--                            </li>-->
<!--                            <li class="text_p m-0">-->
<!--                                <p class="m-0">Ф(%) - Фактичне завантаження обладнання на місяць (відсоток)</p>-->
<!--                            </li>-->
<!--                            <li class="text_p m-0">-->
<!--                                <p class="text_p m-0">ПВЗ(%) - План  виконаних завдань на поточну дату (відсоток)</p>-->
<!--                            </li>-->
<!--                            <li class="text_p m-0">-->
<!--                                <p class="text_p m-0">ФВЗ(%) - Факт виконаних завдань щодо їх планової кількості (відсоток)</p>-->
<!--                            </li>-->
<!--                            <li class="text_p m-0">-->
<!--                                <details>-->
<!--                                    <summary class="sum-item" th:text="${'Показники обладнання за місяць (' + equipmentValue + ', ' + month + ')'}"></summary>-->
<!--                                    <p class=" m-0" th:text="${'П(г) = ' + planHoursPerMonth + ' годин(и)'}"></p>-->
<!--                                    <p class=" m-0" th:text="${'Ф(г) = ' + factHoursPerMonth + ' годин(и)'}"></p>-->
<!--                                    <p class=" m-0" th:text="${'Ф(%) = ' + factPercentsPerMonth + ' %'}"></p>-->
<!--                                    <p class=" m-0" th:text="${'ПВЗ(%) = ' + planForPlanDoneOnTheCurrentDatePerMonth + ' %'}"></p>-->
<!--                                    <p class=" m-0" th:text="${'ФВЗ(%) = ' + factForPlanDonePerMonth + ' %'}"></p>-->
<!--                                </details>-->
<!--                            </li>-->
<!--                        </ol>-->
<!--                    </div>-->
                </div>
            </div>
        </div>
    </div>
</main>
<footer class="container-fluid fixed-bottom">
    <div class="row bg-dark text-bg-secondary" style="height: 8vh">
        <div class="col-xl-4 text-center">
            <p class="text-start m-0 mt-2 ps-3">Semenyuk Oleksandr</p>
            <p class="text-start m-0 ps-3">ITStep, Java</p>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>

<script>
    new DataTable('#example');
    new DataTable('#example1');
    new DataTable('#example2');

    // const dateInput = document.getElementById('dateInput');
    // const csrfTokenInput = document.getElementById('csrfToken');
    //
    // dateInput.addEventListener('change', sendDataToServer);
    //
    // function sendDataToServer() {
    //     const selectedDate = dateInput.value;
    //     const csrfToken = csrfTokenInput.value;
    //     // const id = dateInput.getAttribute("name");
    //     // console.log("id = " + id);
    //     console.log("selectedDate = " + selectedDate);
    //     const url = "/equipment_plans/date/" + selectedDate;
    //     console.log("selectedDate = " + selectedDate);
    //     fetch(`/equipment_plans/date/${selectedDate}`, {
    //         method: 'POST',
    //         headers: {
    //             'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
    //             'X-CSRF-TOKEN': csrfToken
    //         },
    //         // body: `\${selectedDate}`,
    //         // body: new URLSearchParams({ 'selectedDate': selectedDate }),
    //     })
    //         .then(response => {
    //             if (response.ok) {
    //                 console.log('Данные успешно отправлены на сервер!');
    //                 location.reload();
    //             } else {
    //                 console.error('Ошибка при отправке данных на сервер.');
    //             }
    //         })
    //         .catch(error => {
    //             console.error('Произошла ошибка:', error);
    //         });
    // }
</script>
</body>
</html>
