<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link   rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&display=swap"
    />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link th:href="@{/css/style.css}" rel="stylesheet"/>
    <title>Select project</title>
</head>
<body>
<header class="container-fluid fixed-top p-0">
    <div class="row bg-dark text-bg-secondary align-items-center " style="height: 80px">
        <div class="col-xl-2 text-center">
            <a class="text-white" th:href="@{/}">
                <img width="200px" th:src="@{/logo/logo.png}" alt="logo"/>
            </a>
        </div>
        <div class="col-xl-7" style="line-height: 28px">
            <h4 class="title text-center mb-0">Project deadline management</h4>
            <h4 class="title text-center mb-0">for a machine-building enterprise </h4>
        </div>
        <div class="col-xl-2">
            <p class="align-items-center text-end mb-0">Welcome: <span class="user" th:text="${#authentication.name}"></span></p>
        </div>
    </div>
    <hr class="hr-line m-0">
</header>
<main class="container-fluid " >
    <div class="row " style="position: relative; top: 8vh; max-height: 92vh;">
        <div class="aside_menu col-xl-2" style="position: fixed; ">
            <div class="title_menu">
                <h3 class="title_h"><span class="title_s">М</span>ЕНЮ</h3>
            </div>
            <ul class="list_menu">
                <li class="item_menu">
                    <a class="link_menu" th:href="@{/divisions}">Дивізіони</a>
                </li>
                <li class="item_menu">
                    <a class="link_menu" th:href="@{/equipments}">Обладнання</a>
                </li>
                <li class="item_menu">
                    <a class="link_menu" th:href="@{/projects}">Проекти</a>
                </li>
                <li class="item_menu">
                    <a class="link_menu" th:href="@{/designs}" >Конструктор</a>
                </li>
                <li class="item_menu">
                    <a class="link_menu" th:href="@{/technologies}">Технолог</a>
                </li>
                <li class="item_menu">
                    <a class="link_menu" th:href="@{/contracts}">Контракти</a>
                </li>
                <li class="item_menu">
                    <a class="link_menu_active" th:href="@{/tasks}">Виробничі завдання</a>
                    <ul class="list_menu_sub">
                        <li  class="item_menu_sub">
                            <a class="link_menu_sub" th:href="@{/tasks/task_conditions}">Стан</a>
                        </li>
                    </ul>
                </li>
                <li class="item_menu">
                    <a class="link_menu" th:href="@{/production_plans}">План виробництва</a>
                </li>
                <li class="item_menu">
                    <a class="link_menu" th:href="@{/equipment_plans}">Показники</a>
                </li>
            </ul>
        </div>
        <div class="free col-xl-2"></div>
        <div class="free col-xl-10">
            <h2 class="text_h">Виберіть проект для відображення/формування виробничих завдань</h2>
            <div class="row">
                <div class="col-xl-2"></div>
                <div class="col-xl-8">
                    <form method="post" class="row my-5">
                        <div class="col-xl-12">
<!--                        <label class="form-label">-->
                            <select class="form-select bg-white border-3 rounded-0 my-2"  aria-label="Default select example" name="id">
                                <option th:each="project: ${projects}"
                                        th:value="${project.id}"
                                        th:text="${project.number + ' : ' + project.start + ' ... ' + project.deadline + ' : ' + project.projectCondition.name}">
                                </option>
                            </select>
<!--                        </label>-->
                        </div>
                        <br/>
                            <div class="col-xl-1 ps-3 my-2">
                                <input class="form-check-input" type="checkbox" value="ON" id="formTasks" name="form" >
                            </div>
                            <div class="col-xl-6 px-1 my-2">
                                <label class="form-check-label d-inline-block " for="formTasks">Сформувати завдання</label>
                            </div>
                        <br/>
                        <input th:name="${_csrf.parameterName}" type="hidden" th:value="${_csrf.token}">
                        <div class="col-xl-12 my-2">
                            <input class="btn btn-primary border-3 rounded-0 d-block w-100 text-center" type="submit" value="Ok">
                        </div>
                    </form>
                </div>
                <div class="col-xl-2"></div>
            </div>

        </div>
    </div>
</main>
<footer class="container-fluid fixed-bottom">
    <div class="row bg-dark text-bg-secondary" style="height: 8vh">
        <div class="col-xl-4 text-center">
            <p class="text-start m-0 mt-2 ps-3">Semenyuk Oleksandr</p>
            <p class="text-start m-0 ps-3">ITStep, Java</p>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
<script>

    const dateInput = document.getElementById('dateInput');
    const csrfTokenInput = document.getElementById('csrfToken');

    dateInput.addEventListener('change', sendDataToServer);

    function sendDataToServer() {
        const selectedDate = dateInput.value;
        // const selectedDate = "2024";
        const csrfToken = csrfTokenInput.value;

        console.log("selectedDate = " + selectedDate);
        const url = "/production_plans/date/" + selectedDate;

        fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
                'X-CSRF-TOKEN': csrfToken},
            // body: `\${selectedDate}`,
            // body: new URLSearchParams({ 'selectedDate': selectedDate }),
        })
            .then(response => {
                if (response.ok) {
                    console.log('Данные успешно отправлены на сервер!');
                    location.reload();
                } else {
                    console.error('Ошибка при отправке данных на сервер.');
                }
            })
            .catch(error => {
                console.error('Произошла ошибка:', error);
            });
    }
</script>
</body>
</html>







<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">-->
<!--    <title>Tasks</title>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <div class="row">-->
<!--        <div class="col-xl-2">-->
<!--            <div>-->
<!--                <a class="btn btn-primary my-5 " th:href="@{/}">Back to main page</a>-->
<!--            </div>-->
<!--            <p>Welcome: <span th:text="${#authentication.name}"></span></p>-->
<!--            <div>-->
<!--                <a class="btn btn-primary my-1 " th:href="@{/tasks/task_conditions}">Go to Task Conditions</a>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="col-xl-10 text-center my-5">-->
<!--            <h1>Tasks</h1>-->
<!--            <h3>Form tasks for project</h3>-->
<!--            <form method="post" class="row">-->
<!--                <label class="form-label d-inline-block me-1 col-xl-9 text-center ">-->
<!--                    Projects-->
<!--                    <select class="form-select"  aria-label="Default select example" name="id">-->
<!--                        <option th:each="project: ${projects}"-->
<!--                                th:value="${project.id}"-->
<!--                                th:text="${project.number + ' : ' + project.start + ' ... ' + project.deadline + ' : ' + project.projectCondition.name}">-->
<!--                        </option>-->
<!--                    </select>-->
<!--                </label>-->
<!--                <div class="form-check col-xl-2 text-start d-inline-block my-4" >-->
<!--                    <input class="form-check-input" type="checkbox" value="ON" id="formTasks" name="form" >-->
<!--                    <label class="form-check-label d-inline-block" for="formTasks">-->
<!--                        Form tasks-->
<!--                    </label>-->
<!--                </div>-->
<!--                <br/>-->
<!--                <input th:name="${_csrf.parameterName}" type="hidden" th:value="${_csrf.token}">-->
<!--                <input class="btn btn-primary my-5 " type="submit">-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"-->
<!--        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"-->
<!--        crossorigin="anonymous"></script>-->

<!--</body>-->
<!--</html>-->
